(this.webpackJsonptarea3=this.webpackJsonptarea3||[]).push([[0],{107:function(e,t,n){"use strict";n.r(t);var s=n(1),i=n.n(s),a=n(12),c=n.n(a),o=(n(62),n(63),n(64),n(36),n(57)),r=n(25),l=n(26),j=n(29),d=n(28),h=n(27),b=n.n(h),m=n(2),u=b()("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"}),O=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(r.a)(this,n);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={name:"",message:"",messages:[]},e.onMessageChange=function(t){e.setState({message:t.target.value})},e.onNameChange=function(t){e.setState({name:t.target.value})},e.onMessageSubmit=function(t){t.preventDefault();var n=e.state.name,s=e.state.message;u.emit("CHAT",{name:n,message:s}),e.setState({message:""}),e.executeScroll()},e.executeScroll=function(){e.messagesEnd.scrollIntoView()},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;u.onopen=function(){console.log("WebSocket Client Connected")},u.on("CHAT",(function(t){var n=t.name,s=t.date,i=t.message;e.setState({messages:[].concat(Object(o.a)(e.state.messages),[{name:n,date:s,message:i}])})}))}},{key:"componentDidUpdate",value:function(){this.executeScroll()}},{key:"render",value:function(){var e=this,t=this.state.messages.map((function(e,t){var n=e.name,s=e.date,i=e.message;return Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"name-date",children:[Object(m.jsxs)("h3",{children:[n,":"]}),Object(m.jsx)("h5",{children:new Date(s).toLocaleString()})]}),Object(m.jsx)("h4",{children:i})]},t)}));return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Chat"}),Object(m.jsxs)("div",{className:"messages",children:[t,Object(m.jsx)("div",{ref:function(t){e.messagesEnd=t}})]}),Object(m.jsxs)("form",{onSubmit:this.onMessageSubmit,className:"send-message",children:[Object(m.jsxs)("div",{className:"flex",children:[Object(m.jsx)("h2",{children:"Nombre: "}),Object(m.jsx)("input",{name:"name",onChange:function(t){return e.onNameChange(t)},value:this.state.name,label:"name",placeholder:"Escribe tu nombre..."})]}),Object(m.jsxs)("div",{className:"flex",children:[Object(m.jsx)("h2",{children:"Mensaje:"}),Object(m.jsx)("input",{name:"message",onChange:function(t){return e.onMessageChange(t)},value:this.state.message,label:"Message",placeholder:"Escribe un mensaje..."})]}),Object(m.jsx)("button",{className:"update-button",children:"Enviar"})]})]})}}]),n}(s.Component),g=n(16),f=n(3),p=n(110),x=n(111),v=n(112),S=n(113),C=n(115),N=(n(97),n(4)),w=n(114),y=n.p+"static/media/avion.79973fe4.png",k=n.p+"static/media/destination.ced3e942.png",I=n.p+"static/media/origin.0c00614f.png",A=n.p+"static/media/close.4ba8920d.png",M=b()("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"}),D=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(r.a)(this,n);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={flights:[],positions:{},modals:{}},e.showInformation=function(t){console.log(e.state.modals),e.setState((function(n){return{modals:Object(f.a)(Object(f.a)({},e.state.modals),{},Object(g.a)({},t,!n.modals[t]))}}))},e.updateInfo=function(){M.emit("FLIGHTS"),e.setState({positions:{}})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;M.on("FLIGHTS",(function(t){e.setState({flights:t}),e.state.flights.forEach((function(t){e.setState({modals:Object(f.a)(Object(f.a)({},e.state.modals),{},Object(g.a)({},t.code,!1))})}))})),window.onload=function(){M.emit("FLIGHTS")},M.on("POSITION",(function(t){var n=t.code,s=t.position;e.setState({positions:Object(f.a)(Object(f.a)({},e.state.positions),{},Object(g.a)({},n,s))})}))}},{key:"render",value:function(){var e=this,t=N.icon({iconUrl:y,iconSize:[60,60],iconAnchor:[30,30]}),n=N.icon({iconUrl:k,iconSize:[25,40],iconAnchor:[12,40]}),s=N.icon({iconUrl:I,iconSize:[10,10],iconAnchor:[5,5]}),i=this.state.flights.map((function(e,t){return Object(m.jsxs)("div",{children:[Object(m.jsx)(p.a,{position:[e.origin[0],e.origin[1]],icon:s}),Object(m.jsx)(p.a,{position:[e.destination[0],e.destination[1]],icon:n,children:Object(m.jsxs)(x.a,{children:["Codigo: ",e.code]})}),Object(m.jsx)(v.a,{positions:[e.origin,e.destination],color:"red",dashArray:"20",className:"polylines"})]},t)})),a=Object.keys(this.state.positions).map((function(n,s){return Object(m.jsx)(p.a,{position:[e.state.positions[n][0],e.state.positions[n][1]],icon:t,children:Object(m.jsxs)(x.a,{children:["Codigo: ",n]})},s)})),c=this.state.flights.map((function(t,n){return Object(m.jsxs)("div",{className:"flight",onClick:function(){return e.showInformation(t.code)},children:[Object(m.jsx)("h1",{children:t.code}),Object(m.jsx)("h3",{children:"Origen:"}),Object(m.jsxs)("h4",{children:["lat: ",t.origin[0]]}),Object(m.jsxs)("h4",{children:["long: ",t.origin[1]]}),Object(m.jsx)("h3",{children:"Destino:"}),Object(m.jsxs)("h4",{children:["lat: ",t.destination[0]]}),Object(m.jsxs)("h4",{children:["long: ",t.destination[1]]}),Object(m.jsxs)(w.a,{isOpen:e.state.modals[t.code],className:"modal",children:[Object(m.jsx)("img",{src:A,alt:"close",onClick:function(){return e.showInformation(t.code)}}),Object(m.jsx)("h1",{children:t.code}),Object(m.jsxs)("h3",{children:["Origen: ",t.origin]}),Object(m.jsxs)("h3",{children:["Destino: ",t.destination]}),Object(m.jsxs)("h3",{children:["Avion: ",t.plane]}),Object(m.jsxs)("h3",{children:["Asientos: ",t.seats]}),t.passengers.map((function(e){return Object(m.jsxs)("li",{children:[e.name," (",e.age,")"]})}))]})]},n)}));return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Mapa"}),Object(m.jsxs)(S.a,{center:[-34.505,-53.09],zoom:2.5,scrollWheelZoom:!1,className:"map",children:[Object(m.jsx)(C.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(m.jsx)("div",{children:i}),Object(m.jsx)("div",{children:a})]}),Object(m.jsxs)("div",{className:"flight-information",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Informacion de vuelos"}),Object(m.jsx)("button",{onClick:this.updateInfo,className:"update-button",children:"Actualizar informacion"})]}),c]})]})}}]),n}(s.Component);var T=function(){return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)("div",{className:"map-box",children:Object(m.jsx)(D,{})}),Object(m.jsx)("div",{className:"chat-box",children:Object(m.jsx)(O,{})})]})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,116)).then((function(t){var n=t.getCLS,s=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),s(e),i(e),a(e),c(e)}))};c.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(T,{})}),document.getElementById("root")),E()},36:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){}},[[107,1,2]]]);
//# sourceMappingURL=main.08169dba.chunk.js.map