(this.webpackJsonptarea3=this.webpackJsonptarea3||[]).push([[0],{32:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),c=n(20),i=n.n(c),o=(n(54),n(55),n(56),n(32),n(49)),r=n(22),l=n(23),h=n(26),j=n(25),u=n(24),m=n.n(u),d=n(1),b=m()("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"}),g=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(r.a)(this,n);for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={name:"",message:"",messages:[]},e.onMessageChange=function(t){e.setState({message:t.target.value})},e.onNameChange=function(t){e.setState({name:t.target.value})},e.onMessageSubmit=function(t){t.preventDefault();var n=e.state.name,s=e.state.message;b.emit("CHAT",{name:n,message:s}),e.setState({message:""}),e.executeScroll()},e.executeScroll=function(){e.messagesEnd.scrollIntoView()},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;b.onopen=function(){console.log("WebSocket Client Connected")},b.on("CHAT",(function(t){var n=t.name,s=(t.date,t.message);e.setState({messages:[].concat(Object(o.a)(e.state.messages),[{name:n,message:s}])})}))}},{key:"componentDidUpdate",value:function(){this.executeScroll()}},{key:"render",value:function(){var e=this,t=this.state.messages.map((function(e,t){var n=e.name,s=e.message;return Object(d.jsx)("h3",{children:Object(d.jsxs)("b",{children:[n,": ",s]})},t)}));return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Chat"}),Object(d.jsxs)("div",{className:"messages",children:[t,Object(d.jsx)("div",{ref:function(t){e.messagesEnd=t}})]}),Object(d.jsxs)("form",{onSubmit:this.onMessageSubmit,className:"send-message",children:[Object(d.jsxs)("div",{className:"flex",children:[Object(d.jsx)("h2",{children:"Nombre: "}),Object(d.jsx)("input",{name:"name",onChange:function(t){return e.onNameChange(t)},value:this.state.name,label:"name",placeholder:"Escribe tu nombre..."})]}),Object(d.jsxs)("div",{className:"flex",children:[Object(d.jsx)("h2",{children:"Mensaje:"}),Object(d.jsx)("input",{name:"message",onChange:function(t){return e.onMessageChange(t)},value:this.state.message,label:"Message",placeholder:"Escribe un mensaje..."})]}),Object(d.jsx)("button",{children:"Enviar"})]})]})}}]),n}(s.Component),f=n(92),p=n(93),O=n(94),x=n(95),v=n(96),S=(n(89),n(2)),C=n.p+"static/media/avion.79973fe4.png",y=n.p+"static/media/destination.ced3e942.png",N=n.p+"static/media/origin.0c00614f.png",k=m()("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"}),w=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(r.a)(this,n);for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={flights:[]},e.getFlights=function(e){e.preventDefault(),k.emit("FLIGHTS")},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;k.on("FLIGHTS",(function(t){console.log(t),e.setState({flights:t})})),window.onload=function(){k.emit("FLIGHTS")}}},{key:"render",value:function(){S.icon({iconUrl:C,iconSize:[60,60]});var e=S.icon({iconUrl:y,iconSize:[25,40],iconAnchor:[12,40]}),t=S.icon({iconUrl:N,iconSize:[16,16],iconAnchor:[8,8]}),n=this.state.flights.map((function(n,s){return Object(d.jsxs)("div",{children:[Object(d.jsx)(f.a,{position:[n.origin[0],n.origin[1]],icon:t}),Object(d.jsx)(f.a,{position:[n.destination[0],n.destination[1]],icon:e,children:Object(d.jsxs)(p.a,{children:["Codigo: ",n.code]})}),Object(d.jsx)(O.a,{positions:[n.origin,n.destination],color:"red",dashArray:"20",className:"polylines"})]},s)}));return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Mapa"}),Object(d.jsxs)(x.a,{center:[-34.505,-53.09],zoom:5,scrollWheelZoom:!1,className:"map",children:[Object(d.jsx)("h1",{children:"asfkjhs"}),Object(d.jsx)(v.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",maxZoom:"6"}),Object(d.jsx)("div",{children:n})]})]})}}]),n}(s.Component);var M=function(){return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("div",{className:"map-box",children:Object(d.jsx)(w,{})}),Object(d.jsx)("div",{className:"chat-box",children:Object(d.jsx)(g,{})})]})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,97)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),s(e),a(e),c(e),i(e)}))};i.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(M,{})}),document.getElementById("root")),A()}},[[90,1,2]]]);
//# sourceMappingURL=main.c8921287.chunk.js.map