(this.webpackJsonptarea3=this.webpackJsonptarea3||[]).push([[0],{33:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),i=n(20),c=n.n(i),o=(n(55),n(56),n(57),n(33),n(50)),r=n(22),l=n(23),j=n(27),h=n(26),d=n(24),u=n.n(d),b=n(1),m=u()("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"}),g=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(r.a)(this,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={name:"",message:"",messages:[]},e.onMessageChange=function(t){e.setState({message:t.target.value})},e.onNameChange=function(t){e.setState({name:t.target.value})},e.onMessageSubmit=function(t){t.preventDefault();var n=e.state.name,s=e.state.message;m.emit("CHAT",{name:n,message:s}),e.setState({message:""}),e.executeScroll()},e.executeScroll=function(){e.messagesEnd.scrollIntoView()},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;m.onopen=function(){console.log("WebSocket Client Connected")},m.on("CHAT",(function(t){var n=t.name,s=t.date,a=t.message;e.setState({messages:[].concat(Object(o.a)(e.state.messages),[{name:n,date:s,message:a}])})}))}},{key:"componentDidUpdate",value:function(){this.executeScroll()}},{key:"render",value:function(){var e=this,t=this.state.messages.map((function(e,t){var n=e.name,s=e.date,a=e.message;return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"name-date",children:[Object(b.jsxs)("h3",{children:[n,":"]}),Object(b.jsx)("h5",{children:new Date(s).toLocaleString()})]}),Object(b.jsx)("h4",{children:a})]},t)}));return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Chat"}),Object(b.jsxs)("div",{className:"messages",children:[t,Object(b.jsx)("div",{ref:function(t){e.messagesEnd=t}})]}),Object(b.jsxs)("form",{onSubmit:this.onMessageSubmit,className:"send-message",children:[Object(b.jsxs)("div",{className:"flex",children:[Object(b.jsx)("h2",{children:"Nombre: "}),Object(b.jsx)("input",{name:"name",onChange:function(t){return e.onNameChange(t)},value:this.state.name,label:"name",placeholder:"Escribe tu nombre..."})]}),Object(b.jsxs)("div",{className:"flex",children:[Object(b.jsx)("h2",{children:"Mensaje:"}),Object(b.jsx)("input",{name:"message",onChange:function(t){return e.onMessageChange(t)},value:this.state.message,label:"Message",placeholder:"Escribe un mensaje..."})]}),Object(b.jsx)("button",{children:"Enviar"})]})]})}}]),n}(s.Component),p=n(25),O=n(4),f=n(93),x=n(94),v=n(95),S=n(96),C=n(97),y=(n(90),n(2)),N=n.p+"static/media/avion.79973fe4.png",k=n.p+"static/media/destination.ced3e942.png",w=n.p+"static/media/origin.0c00614f.png",M=u()("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"}),A=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(r.a)(this,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={flights:[],positions:{}},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;M.on("FLIGHTS",(function(t){console.log(t),e.setState({flights:t})})),window.onload=function(){M.emit("FLIGHTS")},M.on("POSITION",(function(t){var n=t.code,s=t.position;e.setState({positions:Object(O.a)(Object(O.a)({},e.state.positions),{},Object(p.a)({},n,s))})}))}},{key:"render",value:function(){var e=this,t=y.icon({iconUrl:N,iconSize:[60,60],iconAnchor:[30,30]}),n=y.icon({iconUrl:k,iconSize:[25,40],iconAnchor:[12,40]}),s=y.icon({iconUrl:w,iconSize:[10,10],iconAnchor:[5,5]}),a=this.state.flights.map((function(e,t){return Object(b.jsxs)("div",{children:[Object(b.jsx)(f.a,{position:[e.origin[0],e.origin[1]],icon:s}),Object(b.jsx)(f.a,{position:[e.destination[0],e.destination[1]],icon:n,children:Object(b.jsxs)(x.a,{children:["Codigo: ",e.code]})}),Object(b.jsx)(v.a,{positions:[e.origin,e.destination],color:"red",dashArray:"20",className:"polylines"})]},t)})),i=Object.keys(this.state.positions).map((function(n,s){return Object(b.jsx)(f.a,{position:[e.state.positions[n][0],e.state.positions[n][1]],icon:t,children:Object(b.jsxs)(x.a,{children:["Codigo: ",n]})},s)}));return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Mapa"}),Object(b.jsxs)(S.a,{center:[-34.505,-53.09],zoom:5,scrollWheelZoom:!1,className:"map",children:[Object(b.jsx)("h1",{children:"asfkjhs"}),Object(b.jsx)(C.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(b.jsx)("div",{children:a}),Object(b.jsx)("div",{children:i})]})]})}}]),n}(s.Component);var I=function(){return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("div",{className:"map-box",children:Object(b.jsx)(A,{})}),Object(b.jsx)("div",{className:"chat-box",children:Object(b.jsx)(g,{})})]})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,98)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),s(e),a(e),i(e),c(e)}))};c.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(I,{})}),document.getElementById("root")),T()}},[[91,1,2]]]);
//# sourceMappingURL=main.f9eace9b.chunk.js.map