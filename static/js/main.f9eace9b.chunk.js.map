{"version":3,"sources":["Components/Chat.jsx","images/avion.png","images/destination.png","images/origin.png","Components/Map.jsx","App.js","reportWebVitals.js","index.js"],"names":["socket","io","path","Chat","state","name","message","messages","onMessageChange","e","setState","target","value","onNameChange","onMessageSubmit","preventDefault","emit","executeScroll","messagesEnd","scrollIntoView","onopen","console","log","on","date","this","map","index","className","Date","toLocaleString","ref","el","onSubmit","onChange","label","placeholder","Component","Map","flights","positions","data","window","onload","code","position","planeIcon","L","iconUrl","plane","iconSize","iconAnchor","destinationIcon","destination","originIcon","origin","allFlights","flight","Marker","icon","Popup","Polyline","color","dashArray","allPositions","Object","keys","MapContainer","center","zoom","scrollWheelZoom","TileLayer","attribution","url","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"2TAGMA,EAASC,IAAG,wDAAyD,CACvEC,KAAM,aAgGKC,E,4MA3FXC,MAAQ,CACJC,KAAM,GACNC,QAAS,GACTC,SAAU,I,EAedC,gBAAkB,SAAAC,GACd,EAAKC,SAAS,CAAEJ,QAASG,EAAEE,OAAOC,S,EAGtCC,aAAe,SAAAJ,GACX,EAAKC,SAAS,CAAEL,KAAMI,EAAEE,OAAOC,S,EAGnCE,gBAAkB,SAAAL,GACdA,EAAEM,iBACF,IAAMV,EAAO,EAAKD,MAAMC,KAClBC,EAAU,EAAKF,MAAME,QAC3BN,EAAOgB,KAAK,OAAQ,CAAEX,OAAMC,YAC5B,EAAKI,SAAS,CAACJ,QAAS,KACxB,EAAKW,iB,EAGTA,cAAgB,WACZ,EAAKC,YAAYC,kB,uDA9BrB,WAAqB,IAAD,OAChBnB,EAAOoB,OAAS,WACdC,QAAQC,IAAI,+BAEdtB,EAAOuB,GAAG,QAAQ,YAA4B,IAA1BlB,EAAyB,EAAzBA,KAAMmB,EAAmB,EAAnBA,KAAMlB,EAAa,EAAbA,QAC5B,EAAKI,SAAS,CAACH,SAAS,GAAD,mBAAO,EAAKH,MAAMG,UAAlB,CAA4B,CAACF,OAAMmB,OAAMlB,oB,gCAGxE,WACImB,KAAKR,kB,oBAyBT,WAAS,IAAD,OAEEV,EAAWkB,KAAKrB,MAAMG,SAASmB,KAAI,WAAwBC,GAAW,IAAjCtB,EAAgC,EAAhCA,KAAMmB,EAA0B,EAA1BA,KAAMlB,EAAoB,EAApBA,QACnD,OACI,gCACI,sBAAKsB,UAAU,YAAf,UACI,+BAAKvB,EAAL,OACA,6BAAK,IAAIwB,KAAKL,GAAMM,sBAGxB,6BAAKxB,MANCqB,MAYlB,OACI,gCACI,sCACA,sBAAKC,UAAU,WAAf,UACKrB,EACD,qBAAKwB,IAAK,SAACC,GAAQ,EAAKd,YAAcc,QAEtC,uBAAMC,SAAUR,KAAKX,gBAAiBc,UAAU,eAAhD,UACI,sBAAKA,UAAU,OAAf,UACI,0CACA,uBACIvB,KAAK,OACL6B,SAAU,SAACzB,GAAD,OAAO,EAAKI,aAAaJ,IACnCG,MAAOa,KAAKrB,MAAMC,KAClB8B,MAAM,OACNC,YAAY,4BAGpB,sBAAKR,UAAU,OAAf,UACI,0CACA,uBACIvB,KAAK,UACL6B,SAAU,SAACzB,GAAD,OAAO,EAAKD,gBAAgBC,IACtCG,MAAOa,KAAKrB,MAAME,QAClB6B,MAAM,UACNC,YAAY,6BAGpB,sD,GAtFLC,a,sECPJ,MAA0B,kCCA1B,MAA0B,wCCA1B,MAA0B,mCCYnCrC,EAASC,IAAG,wDAAyD,CACvEC,KAAM,aAqFKoC,E,4MAhFXlC,MAAQ,CACJmC,QAAU,GACVC,UAAW,I,uDAGf,WAAqB,IAAD,OAChBxC,EAAOuB,GAAI,WAAY,SAACkB,GACpBpB,QAAQC,IAAImB,GACZ,EAAK/B,SAAS,CAAC6B,QAASE,OAE5BC,OAAOC,OAAS,WACZ3C,EAAOgB,KAAK,YAEhBhB,EAAOuB,GAAG,YAAY,YAAuB,IAArBqB,EAAoB,EAApBA,KAAMC,EAAc,EAAdA,SAC1B,EAAKnC,SAAS,CAAC8B,UAAU,2BAAK,EAAKpC,MAAMoC,WAAjB,kBAA6BI,EAAOC,W,oBAIpE,WAAS,IAAD,OAEEC,EAAYC,OAAO,CACrBC,QAASC,EACTC,SAAU,CAAC,GAAG,IACdC,WAAY,CAAC,GAAG,MAGdC,EAAkBL,OAAO,CAC3BC,QAASK,EACTH,SAAU,CAAC,GAAG,IACdC,WAAY,CAAC,GAAI,MAGfG,EAAaP,OAAO,CACtBC,QAASO,EACTL,SAAU,CAAC,GAAG,IACdC,WAAY,CAAC,EAAE,KAGbK,EAAa/B,KAAKrB,MAAMmC,QAAQb,KAAI,SAAC+B,EAAQ9B,GAC/C,OACI,gCACI,cAAC+B,EAAA,EAAD,CAAQb,SAAU,CAACY,EAAOF,OAAO,GAAIE,EAAOF,OAAO,IAAKI,KAAML,IAC9D,cAACI,EAAA,EAAD,CAAQb,SAAU,CAACY,EAAOJ,YAAY,GAAII,EAAOJ,YAAY,IAAKM,KAAMP,EAAxE,SACI,eAACQ,EAAA,EAAD,sBACSH,EAAOb,UAGpB,cAACiB,EAAA,EAAD,CAAUrB,UAAW,CAACiB,EAAOF,OAAQE,EAAOJ,aAAcS,MAAO,MAAOC,UAAW,KAAMnC,UAAU,gBAP7FD,MAYZqC,EAAeC,OAAOC,KAAKzC,KAAKrB,MAAMoC,WAAWd,KAAI,SAACkB,EAAMjB,GAC9D,OACI,cAAC+B,EAAA,EAAD,CAAQb,SAAU,CAAC,EAAKzC,MAAMoC,UAAUI,GAAM,GAAG,EAAKxC,MAAMoC,UAAUI,GAAM,IAAKe,KAAMb,EAAvF,SACI,eAACc,EAAA,EAAD,sBACahB,MAFsFjB,MAS/G,OACI,gCACI,sCACA,eAACwC,EAAA,EAAD,CAAcC,OAAQ,EAAE,QAAS,OAAQC,KAAM,EAAGC,iBAAiB,EAAO1C,UAAU,MAApF,UACI,yCACA,cAAC2C,EAAA,EAAD,CACIC,YAAY,yEACZC,IAAI,uDACR,8BAAMjB,IACN,8BAAMQ,c,GA1ER3B,aCKHqC,MAbf,WACE,OACE,sBAAK9C,UAAU,MAAf,UACI,qBAAKA,UAAU,UAAf,SACE,cAAC,EAAD,MAEJ,qBAAKA,UAAU,WAAf,SACE,cAAC,EAAD,UCHO+C,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCDdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1Bb,M","file":"static/js/main.f9eace9b.chunk.js","sourcesContent":["import React, {Component} from 'react'\nimport io from 'socket.io-client'\n\nconst socket = io('wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl', {\n    path: '/flights'\n});\n\nclass Chat extends Component{\n\n    state = {\n        name: \"\",\n        message: \"\",\n        messages: [],\n    };\n\n    componentDidMount() {\n        socket.onopen = () => {\n          console.log('WebSocket Client Connected');\n        };\n        socket.on(\"CHAT\", ({name, date, message}) => {\n            this.setState({messages: [ ...this.state.messages, {name, date, message}]})\n        });\n      }\n    componentDidUpdate() {\n        this.executeScroll();\n      }\n\n    onMessageChange = e => {\n        this.setState({ message: e.target.value})\n    }\n\n    onNameChange = e => {\n        this.setState({ name: e.target.value})\n    }\n\n    onMessageSubmit = e => {\n        e.preventDefault()\n        const name = this.state.name\n        const message = this.state.message\n        socket.emit('CHAT', { name, message })\n        this.setState({message: \"\"})\n        this.executeScroll()\n    }\n\n    executeScroll = () => {\n        this.messagesEnd.scrollIntoView()\n    }\n    \n\n    render(){\n\n        const messages = this.state.messages.map(({name, date, message}, index) => {\n            return (\n                <div key={index}>\n                    <div className='name-date'>\n                        <h3>{name}:</h3>\n                        <h5>{new Date(date).toLocaleString()}</h5>\n                        \n                    </div>\n                    <h4>{message}</h4>\n                    \n                </div>\n            )\n        });\n    \n        return(\n            <div>\n                <h1>Chat</h1>\n                <div className=\"messages\">\n                    {messages}\n                    <div ref={(el) => {this.messagesEnd = el; }}></div> \n                </div>\n                    <form onSubmit={this.onMessageSubmit} className=\"send-message\">\n                        <div className=\"flex\">\n                            <h2>Nombre: </h2>\n                            <input\n                                name=\"name\"\n                                onChange={(e) => this.onNameChange(e)}\n                                value={this.state.name}\n                                label=\"name\"\n                                placeholder='Escribe tu nombre...'\n                            />\n                        </div>\n                        <div className=\"flex\">\n                            <h2>Mensaje:</h2>\n                            <input\n                                name=\"message\"\n                                onChange={(e) => this.onMessageChange(e)}\n                                value={this.state.message}\n                                label=\"Message\"\n                                placeholder='Escribe un mensaje...'\n                            />\n                        </div>\n                        <button>Enviar</button>\n                    </form>\n            </div>\n          )\n    }\n}\n\nexport default Chat;","export default __webpack_public_path__ + \"static/media/avion.79973fe4.png\";","export default __webpack_public_path__ + \"static/media/destination.ced3e942.png\";","export default __webpack_public_path__ + \"static/media/origin.0c00614f.png\";","import React, {Component} from 'react'\nimport { MapContainer, TileLayer, Marker, Popup, Polyline } from 'react-leaflet' \nimport 'leaflet/dist/leaflet.css';\nimport io from 'socket.io-client'\nimport * as L from \"leaflet\";\nimport '../css/map.css'\n\n// icons\nimport plane from '../images/avion.png'\nimport destination from '../images/destination.png'\nimport origin from '../images/origin.png'\n\nconst socket = io('wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl', {\n    path: '/flights'\n});\n\nclass Map extends Component{\n\n    state = {\n        flights : [],\n        positions: {}\n    }\n\n    componentDidMount() {\n        socket.on (\"FLIGHTS\",  (data) => {\n            console.log(data)\n            this.setState({flights: data})\n        })\n        window.onload = function () {\n            socket.emit('FLIGHTS')\n        }\n        socket.on(\"POSITION\", ({code, position}) => {\n            this.setState({positions: {...this.state.positions, [code]: position}})\n        })\n    }\n\n    render(){\n\n        const planeIcon = L.icon({\n            iconUrl: plane,\n            iconSize: [60,60],\n            iconAnchor: [30,30]\n        });\n\n        const destinationIcon = L.icon({\n            iconUrl: destination,\n            iconSize: [25,40],\n            iconAnchor: [12, 40]\n        })\n\n        const originIcon = L.icon({\n            iconUrl: origin,\n            iconSize: [10,10],\n            iconAnchor: [5,5]\n        })\n\n        const allFlights = this.state.flights.map((flight, index) => {\n            return (\n                <div key={index}>\n                    <Marker position={[flight.origin[0], flight.origin[1]]} icon={originIcon}></Marker>\n                    <Marker position={[flight.destination[0], flight.destination[1]]} icon={destinationIcon}>\n                        <Popup>\n                        Codigo: {flight.code}\n                        </Popup>\n                    </Marker>\n                    <Polyline positions={[flight.origin, flight.destination]} color={'red'} dashArray={'20'} className='polylines'/>\n                </div>\n            )\n        });\n\n        const allPositions = Object.keys(this.state.positions).map((code, index) => {\n            return (\n                <Marker position={[this.state.positions[code][0],this.state.positions[code][1]]} icon={planeIcon} key={index}>\n                    <Popup>\n                        Codigo: {code}\n                    </Popup>\n                </Marker>\n            )\n        })\n\n\n        return (\n            <div>\n                <h1>Mapa</h1>\n                <MapContainer center={[-34.505, -53.09]} zoom={5} scrollWheelZoom={false} className='map'>\n                    <h1>asfkjhs</h1>\n                    <TileLayer\n                        attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n                        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"                    />\n                    <div>{allFlights}</div>\n                    <div>{allPositions}</div>\n                    \n                </MapContainer>\n            </div>\n        );\n    }\n}\n\nexport default Map;\n\n","import React from 'react'\nimport './App.css';\nimport './css/chat.css'\nimport './css/map.css'\nimport Chat from './Components/Chat'\nimport Map from './Components/Map'\n\n\nfunction App() {\n  return (\n    <div className=\"App\">\n        <div className=\"map-box\">\n          <Map />\n        </div>\n      <div className=\"chat-box\">\n        <Chat />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}